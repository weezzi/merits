package com.merits.modules.base.dao;

// IMPORTS ---------------------------------------------------------------------

import com.weezzi.core.data.*;
import com.weezzi.core.dbmanager.dao.SingleRecordDAO;
import com.weezzi.utils.StringUtilities;
import com.weezzi.utils.extras.cache.WeezziCacheObjectType;
import com.weezzi.utils.extras.console.Console;
import com.weezzi.core.dbmanager.dao.DAOParameters;
import com.weezzi.utils.SecurityUtilities;


import java.sql.CallableStatement;
import java.sql.ResultSet;



/**
 * <b>Title: </b>Shop Cashier Data Access Object<br/>
 * <b>Description: </b>Shop Cashier DAO Class<br/>
 *
 * @author AUTO-GENERATED By Weezzi Builder
 * @version 1.0
 */
public class ShopCashiersDAO extends SingleRecordDAO {


	// CONSTANTS --------------------------------------------------------------

	
	public static final String CACHE_PREFIX = "D5#";
	private static final long serialVersionUID = 1l;


    // MULTI-LANGUAGE ---------------------------------------------------------


    /**
     *  Multi-Language
     */
    public enum MultiLanguageFields {
        ;

        private String column;

        MultiLanguageFields(String column) {
        	this.column = column;
        }

        public String getColumnName() {
        	return column;
        }
	}


    // DATA TYPE ENUMERATION --------------------------------------------------


    /**
     *  DAO Search Type
     */
    public enum SearchType {

    	// Single Record Queries
        Username("Q1"),

		;
    	
        private String cachePrefix;
        
        SearchType(String cachePrefix) {
        	this.cachePrefix = cachePrefix;
        }

        /**
         * Gets cache prefix
         **/
        public String toString() {
        	return cachePrefix;
        }
    }


    // PROPERTIES --------------------------------------------------------------

    // Shop Cashiers Identifier
    private long id;
    // Shop Cashiers Shop Identifier
    private long idShop;
    // Shop Cashiers First Name
    private String firstName;
    // Shop Cashiers Last Name
    private String lastName;
    // Shop Cashiers Phone
    private String phone;
    // Shop Cashiers Login Username
    private String loginUsername;
    // Shop Cashiers Login Password
    private String loginPassword;
    // Shop Cashiers Preferred Language
    private String preferredLanguage;


    // CONSTRUCTORS ------------------------------------------------------------


	/**
	 * Empty Constructor
	 **/
	public ShopCashiersDAO() {
        // Set cache object type
		this.setCacheObjectType(WeezziCacheObjectType.SingleRecord);
	}


	/**
	 * Type Constructor
	 **/
	public ShopCashiersDAO(SearchType type) {
        // Set DAO Search type
        this.setSearchType(type);
        // Set cache object type
		this.setCacheObjectType(WeezziCacheObjectType.SingleRecord);
	}
	
	
    /**
     * Shop Cashier Bean Field Constructor
     * @param id long Shop Cashiers Identifier
     */
    public ShopCashiersDAO(long id) {
        // Set cache object type
        this.setCacheObjectType(WeezziCacheObjectType.SingleRecord);
        // Set Shop Cashiers Identifier
        setId(id);
    }


    /**
     * Shop Cashier Bean Field Constructor
     * @param id long Shop Cashiers Identifier
     * @param idShop long Shop Cashiers Shop Identifier
     */
    public ShopCashiersDAO(long id, long idShop) {
        // Set cache object type
        this.setCacheObjectType(WeezziCacheObjectType.SingleRecord);
        // Set Shop Cashiers Identifier
        setId(id);
        // Set Shop Cashiers Shop Identifier
        setIdShop(idShop);
    }


    /**
     * Shop Cashier Bean Field Constructor
     * @param id long Shop Cashiers Identifier
     * @param idShop long Shop Cashiers Shop Identifier
     * @param firstName String Shop Cashiers First Name
     * @param lastName String Shop Cashiers Last Name
     * @param phone String Shop Cashiers Phone
     * @param loginUsername String Shop Cashiers Login Username
     * @param loginPassword String Shop Cashiers Login Password
     * @param preferredLanguage String Shop Cashiers Preferred Language
     */
    public ShopCashiersDAO(long id, long idShop, String firstName
                    , String lastName, String phone, String loginUsername
                    , String loginPassword, String preferredLanguage) {
        // Set cache object type
        this.setCacheObjectType(WeezziCacheObjectType.SingleRecord);
        // Set Shop Cashiers Identifier
        setId(id);
        // Set Shop Cashiers Shop Identifier
        setIdShop(idShop);
        // Set Shop Cashiers First Name
        setFirstName(firstName);
        // Set Shop Cashiers Last Name
        setLastName(lastName);
        // Set Shop Cashiers Phone
        setPhone(phone);
        // Set Shop Cashiers Login Username
        setLoginUsername(loginUsername);
        // Set Shop Cashiers Login Password
        setLoginPassword(loginPassword);
        // Set Shop Cashiers Preferred Language
        setPreferredLanguage(preferredLanguage);
    }


    

    
    // TYPE -------------------------------------------------------------------

    
    /**
     * Sets DAO search type
     * @param type
     */
    public void setSearchType(SearchType type) {
    	// Sets DAO type
    	super.setSearchType(type);
    }


	// GETTERS -----------------------------------------------------------------


    /**
     * Get Shop Cashiers Identifier
     * @return long Shop Cashiers Identifier
     */
    public long getId() {
        return this.id;
    }


    /**
     * Get Shop Cashiers Shop Identifier
     * @return long Shop Cashiers Shop Identifier
     */
    public long getIdShop() {
        return this.idShop;
    }


    /**
     * Get Shop Cashiers First Name
     * @return String Shop Cashiers First Name
     */
    public String getFirstName() {
        return this.firstName;
    }


    /**
     * Get Shop Cashiers Last Name
     * @return String Shop Cashiers Last Name
     */
    public String getLastName() {
        return this.lastName;
    }


    /**
     * Get Shop Cashiers Phone
     * @return String Shop Cashiers Phone
     */
    public String getPhone() {
        return this.phone;
    }


    /**
     * Get Shop Cashiers Login Username
     * @return String Shop Cashiers Login Username
     */
    public String getLoginUsername() {
        return this.loginUsername;
    }


    /**
     * Get Shop Cashiers Login Password
     * @return String Shop Cashiers Login Password
     */
    public String getLoginPassword() {
        return this.loginPassword;
    }


    /**
     * Get Shop Cashiers Preferred Language
     * @return String Shop Cashiers Preferred Language
     */
    public String getPreferredLanguage() {
        return this.preferredLanguage;
    }



	// SETTERS -----------------------------------------------------------------


    /**
     * Set Shop Cashiers Identifier
     * @param id long Shop Cashiers Identifier
     */
    public void setId(long id) {
        this.id = id;
    }


    /**
     * Set Shop Cashiers Shop Identifier
     * @param idShop long Shop Cashiers Shop Identifier
     */
    public void setIdShop(long idShop) {
        this.idShop = idShop;
    }


    /**
     * Set Shop Cashiers First Name
     * @param firstName String Shop Cashiers First Name
     */
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }


    /**
     * Set Shop Cashiers Last Name
     * @param lastName String Shop Cashiers Last Name
     */
    public void setLastName(String lastName) {
        this.lastName = lastName;
    }


    /**
     * Set Shop Cashiers Phone
     * @param phone String Shop Cashiers Phone
     */
    public void setPhone(String phone) {
        this.phone = phone;
    }


    /**
     * Set Shop Cashiers Login Username
     * @param loginUsername String Shop Cashiers Login Username
     */
    public void setLoginUsername(String loginUsername) {
        this.loginUsername = loginUsername;
    }


    /**
     * Set Shop Cashiers Login Password
     * @param loginPassword String Shop Cashiers Login Password
     */
    public void setLoginPassword(String loginPassword) {
        this.loginPassword = loginPassword;
    }


    /**
     * Set Shop Cashiers Preferred Language
     * @param preferredLanguage String Shop Cashiers Preferred Language
     */
    public void setPreferredLanguage(String preferredLanguage) {
        this.preferredLanguage = preferredLanguage;
    }



    // MULTI-LANGUAGE ---------------------------------------------------------



	// DAO ID -----------------------------------------------------------------

    
    /**
     * Checks if has Id Field
     */
    public boolean hasIdField() {
    	return true;
    }

    
    /**
     * Sets Id
     * @param id
     */
    public void setId(Long id) {
        this.id = id;
    }


    // CACHING ----------------------------------------------------------------
    
    
	/**
	 * Gets cachePrefix
	 * @return The cachePrefix of this object
	 */
	public String getCachePrefix() {
		return CACHE_PREFIX;
	}
	
	
	/**
	 * Gets the object cache keys
	 * @return cacheKeys
	 */
	public String[] getCacheKeys() {
		if (getParameters() != null) {
			return getParameters().getCacheKeys();
		}
		return null;
	}
	

    // DATABASE MANAGER SPECIFIC ----------------------------------------------

    
    /**
     * Gets table name
     */
    public String getTableName() {
    	return "SHOP_CASHIERS";
    }

    
    /**
     * Gets DB Connection name
     * @return project database connection name;
     */
    public String getDBConnectionName() {
    	return "Merits_Merits";
    }

    
    /**
     * Gets Insert query SQL
     * @return Insert SQL
     */
    public String getInsertSQL() {
    	// SQL
    	return "INSERT INTO SHOP_CASHIERS (`ID_SHOP`, `FIRST_NAME`, `LAST_NAME`, `PHONE`, `LOGIN_USERNAME`, `LOGIN_PASSWORD`, `PREFERRED_LANGUAGE`) values (?, ?, ?, ?, ?, ?, ?)";
    }

    
    /**
     * Gets Insert procedure
     */
    public String getInsertProcedureName() {
    	return "SHOP_CASHIERS_PROC(?, ?, ?, ?, ?, ?, ?, ?)";
    }


	// RESULTSETS & STATEMENTS ------------------------------------------------
	    
    
    /**
     * Fills insert fields
     * @param statement
     */
    public void fillStatementFieldsForInsert(CallableStatement statement) throws Exception {
        // Set Shop Cashiers Shop Identifier
        statement.setLong(1, idShop);
        // Check If Shop Cashiers First Name Is Null
        if (firstName == null) {
            statement.setNull(2, java.sql.Types.VARCHAR);
        } else {
            // Set Shop Cashiers First Name
            statement.setString(2, StringUtilities.capString(firstName,100));
        }
        // Check If Shop Cashiers Last Name Is Null
        if (lastName == null) {
            statement.setNull(3, java.sql.Types.VARCHAR);
        } else {
            // Set Shop Cashiers Last Name
            statement.setString(3, StringUtilities.capString(lastName,100));
        }
        // Check If Shop Cashiers Phone Is Null
        if (phone == null) {
            statement.setNull(4, java.sql.Types.VARCHAR);
        } else {
            // Set Shop Cashiers Phone
            statement.setString(4, StringUtilities.capString(phone,50));
        }
        // Set Shop Cashiers Login Username (dummy value for later update)
        statement.setString(5, "-");
        // Set Shop Cashiers Login Password (dummy value for later update)
        statement.setString(6, "-");
        // Check If Shop Cashiers Preferred Language Is Null
        if (preferredLanguage == null) {
            statement.setNull(7, java.sql.Types.VARCHAR);
        } else {
            // Set Shop Cashiers Preferred Language
            statement.setString(7, StringUtilities.capString(preferredLanguage,3));
        }
    }


    /**
     * Sets DAO values from a resultset 
     * @param resultset
     */
    public void fillValuesFromResultSet(ResultSet resultset) throws Exception {
        // Set Shop Cashiers Identifier
        this.setId(resultset.getLong("ID"));
        // Set Shop Cashiers Shop Identifier
        this.setIdShop(resultset.getLong("ID_SHOP"));
        // Set Shop Cashiers First Name
        this.setFirstName(resultset.getString("FIRST_NAME"));
        // Check if was null
        if (resultset.wasNull()) {
            this.setFirstName(null);
        }
        // Set Shop Cashiers Last Name
        this.setLastName(resultset.getString("LAST_NAME"));
        // Check if was null
        if (resultset.wasNull()) {
            this.setLastName(null);
        }
        // Set Shop Cashiers Phone
        this.setPhone(resultset.getString("PHONE"));
        // Check if was null
        if (resultset.wasNull()) {
            this.setPhone(null);
        }
        // Set Shop Cashiers Login Username
        this.setLoginUsername(SecurityUtilities.decrypt(resultset.getString("LOGIN_USERNAME"), "SHOP_CASHIERS", "LOGIN_USERNAME"));
        // Set Shop Cashiers Login Password
        this.setLoginPassword(SecurityUtilities.decryptSalted(resultset.getString("LOGIN_PASSWORD"), "SHOP_CASHIERS", "LOGIN_PASSWORD", this.getId()));
        // Set Shop Cashiers Preferred Language
        this.setPreferredLanguage(resultset.getString("PREFERRED_LANGUAGE"));
        // Check if was null
        if (resultset.wasNull()) {
            this.setPreferredLanguage(null);
        }
    }



	// ENCRYPTION METHODS -----------------------------------------------------


	/**
	 * Checks if has encryption
	 * @return
	 */
	public boolean hasEncryption() {
    	return true;
    }

    
    /**
     * Gets Encryption Update SQL
     * @return
     */
	public String getEncryptionUpdateSQL() {
        return "UPDATE SHOP_CASHIERS " +
               " SET LOGIN_USERNAME = ? , LOGIN_PASSWORD = ?  " +
               " WHERE ID = ?";
	}


    /**
     * Updates the encryption columns
     * @param statement
     * @param rowId
     */
    public void updateEncryptionColumns(CallableStatement statement, long rowId) throws Exception {
        // Set Fields
        statement.setString(1, SecurityUtilities.encrypt(loginUsername, "SHOP_CASHIERS", "LOGIN_USERNAME"));
        statement.setString(2, SecurityUtilities.encryptSalted(loginPassword, "SHOP_CASHIERS", "LOGIN_PASSWORD", rowId));
        statement.setLong(3, rowId);
    }


    /**
     * Gets a encrypted value for the loginUsername field
     * @param loginUsername
     * @return
     * @throws Exception
     */
    public static String getEncryptedLoginUsername(String loginUsername) throws Exception {
        return SecurityUtilities.encrypt(loginUsername, "SHOP_CASHIERS", "LOGIN_USERNAME");
    }


    /**
     * Gets a encrypted value for the loginPassword field
     * @param loginPassword
     * @param salt
     * @return
     * @throws Exception
     */
    public static String getEncryptedLoginPassword(String loginPassword, long salt) throws Exception {
        return SecurityUtilities.encrypt(loginPassword, "SHOP_CASHIERS", "LOGIN_PASSWORD", salt);
    }
    
    // ------------------------------------------------------------------------
    // PARAMETERS CLASSES -----------------------------------------------------
    // ------------------------------------------------------------------------



	// Username Parameters Class -----------------------------------------------


	/**
	 * Username
	 */
	public class UsernameParameters extends DAOParameters {

		
		// Properties .........................................................

		
        // Shop Cashiers Shop Identifier
        private long idShop;
        // Shop Cashiers Login Username
        private String loginUsername;
        

		// Constructors .......................................................

		
		public UsernameParameters(long idShop, String loginUsername) {
            this.idShop = idShop;
            this.loginUsername = loginUsername;
		}


        // DAO Parameters .....................................................


        /**
         * Gets the search fields
         * @return
         */
		public Object[] getSearchFields() {
			// Local Variables
			return new Object[] {idShop, loginUsername};
		}
	
	
		/**
		 * Gets the object cache keys
		 * @return cacheKeys
		 */
		public String[] getCacheKeys() {
			return null;
		}

		
	}

}
